<div id="menu_backlog_wrapper">
	<div class="display_menu">

		<!-- 閉じるボタン -->
		<div class='menu_item menu_close' style='position: absolute; top: 24px; left: 1192px;'>
		<a title="ゲームに戻る" href="javascript:void(0)"><img src="data/others/plugin/theme_kopanda_bth_10/image/system/menu_btn_close.png" /></a>
		</div>

		<!-- スクロールボタン タッチデバイス用 -->
		<img class="button_smart button_arrow_up"   src='data/others/plugin/theme_kopanda_bth_10/image/system/arrow_up.png'   style='cursor:pointer;left: 60px; top: 320px; position: absolute;'>
		<img class="button_smart button_arrow_down" src='data/others/plugin/theme_kopanda_bth_10/image/system/arrow_down.png' style='cursor:pointer;left: 60px; top: 480px; position: absolute;'>
		<div style="clear:both"></div>

		<!-- ログ本体 -->
		<div class="log_body" id="touchbox"></div>

	</div>

		<!-- 背景画像 -->
		<img class="img_bg_base" src='data/others/plugin/theme_kopanda_bth_10/image/system/menu_log_bg.png' style='z-index:-1;left:0;top:0;width:100%;height:100%;position:absolute;'>

		<!-- ボタンホバー時に画像を変更する -->
    <script>
        $("#menu_backlog_wrapper .menu_item img").each((i, elm) => {
            const j_elm = $(elm);
            const original_src = j_elm.attr("src");
            const hover_src = original_src.replace(".png", "2.png");
            j_elm.hover(
                () => {
                    j_elm.attr("src", hover_src);
                },
                () => {
                    j_elm.attr("src", original_src);
                },
            );
        });
    </script>

		<!-- スワイプ処理 -->
		<script>
			$(function(){
			var box = $('#touchbox')[0];
			var touchStartPositionX;
			var touchStartPositionY;
			var touchMovePositionX;
			var touchMovePositionY;
			var moveFarX;
			var moveFarY;
			var startScrollX;
			var startScrollY;
			var moveScrollX;
			var moveScrollY;

			box.addEventListener("touchstart",touchHandler,false);
			box.addEventListener("touchmove",touchHandler,false);

			function touchHandler(e){
				var touch = e.touches[0];
				if(e.type == "touchstart"){
					touchStartPositionX = touch.pageX;
					touchStartPositionY = touch.pageY;

					//タッチ前スクロールをとる
					startScrollX = $('#touchbox').scrollLeft();
					startScrollY = $('#touchbox').scrollTop();
				}
				if(e.type == "touchmove"){
					e.preventDefault();

					//現在の座標を取得
					touchMovePositionX = touch.pageX;
					touchMovePositionY = touch.pageY;

					//差をとる
					moveFarX = touchStartPositionX - touchMovePositionX;
					moveFarY = touchStartPositionY - touchMovePositionY;

					//スクロールを動かす
					moveScrollX = startScrollX +moveFarX;
					moveScrollY = startScrollY +moveFarY;
					$('#touchbox').scrollLeft(moveScrollX);
					$('#touchbox').scrollTop(moveScrollY);
				}
			}
		});

		</script>

</div>
